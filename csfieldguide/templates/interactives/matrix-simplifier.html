{% extends interactive_mode_template %}

{% load i18n %}
{% load static %}

{% block html %}
  <div class="container">
    <h3 class='text-center'>{% trans "Matrix Simplifier" %}</h3>
    <p class="text-center">{% trans "Note that vectors will always be added <i>after</i> matrix multiplication operations have been applied." %}</p>
    <div class="row">
      <div id="matrices-input-container" class="containers col-3 text-center">
        <div class="row draggable">
          <div class="matrix col invisible content border rounded m-1">
            \[
              \begin{bmatrix}
              cos(45)   &  0  &  sin(45) \\
              0         &  1  &  0 \\
              -sin(45)  &  0  &  cos(45) \\
              \end{bmatrix}
            \]
          </div>
          <div class="drag-indicator col p-0 d-none">
            <hr>
          </div>
        </div>
    
        <div class="row draggable">
          <div class="matrix col invisible content border rounded m-1">
            \[
              \begin{bmatrix}
              10  &  0  &  0 \\
              0   &  10 &  0 \\
              0   &  0  &  10 \\
              \end{bmatrix}
            \]
          </div>
          <div class="drag-indicator col p-0 d-none">
            <hr>
          </div>
        </div>
        <button id="add-matrix-btn" type="button" class="btn btn-primary" data-toggle="modal" data-target="#matrix-modal">{% trans "Add matrix" %}</button>
      </div>

      <div id="vector-input-container" class="containers col-2 text-center">
        <div class="row draggable">
          <div class="vector col invisible content border rounded m-1">
            \[
              \begin{bmatrix}
              10 \\
              0 \\
              0 \\
              \end{bmatrix}
            \]
          </div>
          <div class="drag-indicator col p-0 d-none">
            <hr>
          </div>
        </div>
        <button id="add-vector-btn" type="button" class="btn btn-primary" data-toggle="modal" data-target="#vector-modal">{% trans "Add vector" %}</button>
      </div>

      <div id="output-container" class="col-7 text-center invisible">
        \[
          \begin{bmatrix}
          x^\prime \\
          y^\prime \\
          z^\prime \\
          \end{bmatrix}
        \] =
        <div id="matrix-output" class="d-inline"></div>
        \[
          \begin{bmatrix}
          x \\
          y \\
          z \\
          \end{bmatrix}
        \] +
        <div id="vector-output" class="d-inline"></div>
      </div>
    </div>

    <!-- Modal for adding a matrix -->
    <div id="matrix-modal" class="modal" tabindex="-1" role="dialog">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">{% trans "Add a matrix" %}</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="matrix-row">
              <input class="form-control text-center" id="matrix-row-0-col-0" value=1 type="number"/>
              <input class="form-control text-center" id="matrix-row-0-col-1" value=0 type="number"/>
              <input class="form-control text-center" id="matrix-row-0-col-2" value=0 type="number"/>
            </div>
    
            <div class="matrix-row">
              <input class="form-control text-center" id="matrix-row-1-col-0" value=0 type="number"/>
              <input class="form-control text-center" id="matrix-row-1-col-1" value=1 type="number"/>
              <input class="form-control text-center" id="matrix-row-1-col-2" value=0 type="number"/>
            </div>
            <div class="matrix-row">
              <input class="form-control text-center" id="matrix-row-2-col-0" value=0 type="number"/>
              <input class="form-control text-center" id="matrix-row-2-col-1" value=0 type="number"/>
              <input class="form-control text-center" id="matrix-row-2-col-2" value=1 type="number"/>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">{% trans "Close" %}</button>
            <button id="add-matrix-from-input" type="button" class="btn btn-primary" data-dismiss="modal">{% trans "Add matrix" %}</button>
          </div>
        </div>
      </div>
    </div>
    <!-- Modal for adding a vector -->
    <div id="vector-modal" class="modal" tabindex="-1" role="dialog">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">{% trans "Add a vector" %}</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="matrix-row">
              <input class="form-control text-center" id="vector-row-0" value=1 type="number"/>
            </div>
            <div class="matrix-row">
              <input class="form-control text-center" id="vector-row-1" value=0 type="number"/>
            </div>
            <div class="matrix-row">
              <input class="form-control text-center" id="vector-row-2" value=0 type="number"/>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">{% trans "Close" %}</button>
            <button id="add-vector-from-input" type="button" class="btn btn-primary" data-dismiss="modal">{% trans "Add vector" %}</button>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock html %}

{% block css %}
  <link rel="stylesheet" href="{% static 'interactives/matrix-simplifier/css/matrix-simplifier.css' %}">
{% endblock css %}

{% block js %}
  <script type="text/javascript" src="{% static 'interactives/matrix-simplifier/js/matrix-simplifier.js' %}"></script>
{% endblock js %}
